<html>
<head>
</head>
<body>
<p>
   <input type="button" value="時間設定" id="startcount" onclick="startShowing();">
   <input type="button" value="終了" id="endcount" onclick="stopShowing();">
</p>
<p id="PassageArea">(ここにカウントが表示されます)</p>
</body>

<script>
var PassSec=0;   // 秒数カウント用変数

// 繰り返し処理の中身
function showPassage() {
   //PassSec = second + 60*mins;
   if((PassSec=="")||(isNaN(PassSec){
      alert('時間を設定してください。');
      stopShowing();
   }else {
      PassSec--;   // カウントダウン
      var Min = parseInt(PassSec / 60);  //秒を分に変換
      var Sec = PassSec % 60;  //秒を計算
      if (Min != 0) {  //分が0かどうかで表示変更
         var msg = "残り時間 " + Min + "分" + Sec + "秒です。";   // 表示文作成
         document.getElementById("PassageArea").innerHTML = msg;   // 表示更新
      } else {
         var msg = "残り時間 " + Sec + "秒です。";   // 表示文作成
         document.getElementById("PassageArea").innerHTML = msg;   // 表示更新
      }
      if (!PassSec) {
         clearInterval(PassageID);
         alert("終了");
      }
   }
}

// 繰り返し処理の開始
function startShowing() {
   var mins=window.prompt("分で設定して下さい。ex)1分30秒の場合->1.5と入力",5);
   PassSec = mins*60;
   PassageID = setInterval('showPassage()',1000);   // タイマーをセット(1000ms間隔)
   document.getElementById("startcount").disabled = true;   // 開始ボタンの無効化
}

// 繰り返し処理の中止
function stopShowing() {
  clearInterval( PassageID );   // タイマーのクリア
  document.getElementById("startcount").disabled = false;   // 開始ボタンの有効化
  document.getElementById("PassageArea").innerHTML = '(ここにカウントが表示されます)';   // 表示更新

}
</script>
</html>


